@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Styles -->
<style>
    .card-title {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 0.3rem;
    }

    .card-text {
        margin-bottom: 0.5rem;
    }

    .rating {
        color: #ffc107;
        font-size: 1rem;
    }

    .card:hover {
        transform: scale(1.02);
        transition: 0.3s ease-in-out;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .btn-group {
        display: flex;
        justify-content: space-between;
        margin-top: auto;
    }

    .btn-primary, .btn-outline-danger {
        width: 48%;
    }

    .btn-primary {
        background-color: #343a40;
        border: none;
    }

        .btn-primary:hover {
            background-color: #212529;
        }

    .btn-outline-danger {
        border-color: #dc3545;
        color: #dc3545;
    }

        .btn-outline-danger:hover {
            background-color: #dc3545;
            color: white;
        }

    .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 2rem;
        align-items: center;
        justify-content: center;
    }

        .controls input,
        .controls select {
            padding: 10px;
            font-size: 1rem;
            min-width: 200px;
        }

    .nav-btn {
        padding: 10px 15px;
        background-color: #343a40;
        color: white;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
    }

        .nav-btn:hover {
            background-color: #212529;
        }

    /* Toast notification */
    .toast-notification {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #343a40;
        color: white;
        padding: 1rem 2rem;
        border-radius: 10px;
        z-index: 1050;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
    }

        .toast-notification.show {
            opacity: 1;
            pointer-events: auto;
        }
</style>

<div class="container mt-4">
    <h2 class="mb-4 text-center">📚 Welcome to BookMart</h2>

    <!-- Controls -->
    <div class="controls">
        <input type="text" id="searchBox" placeholder="Search by title or ISBN" />
        <select id="sortSelect">
            <option value="">Sort by</option>
            <option value="lowToHigh">Price: Low to High</option>
            <option value="highToLow">Price: High to Low</option>
        </select>
        <a href="cart.html" class="nav-btn">🛒 Cart</a>
        <a href="wishlist.html" class="nav-btn">❤️ Wishlist</a>
    </div>

    <!-- Book List -->
    <div class="row" id="bookList">
        <!-- Book 2 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="~/lib/bootstrap/1984.jpg" class="card-img-top" alt="1984">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">1984</h5>
                    <p class="card-text text-muted">George Orwell</p>
                    <div class="rating mb-2">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="fw-bold">$10.50</p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick='addToCart("1984", 10.50)'>Add to Cart</button>
                        <button class="btn btn-outline-danger" onclick='addToWishlist("1984")'>♡ Wishlist</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Book 5 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="~/lib/bootstrap/harrypotter.jpeg" class="card-img-top" alt="harrypoter">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Jk Rowling</h5>
                    <p class="card-text text-muted">George Orwell</p>
                    <div class="rating mb-2">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="fw-bold">$10.50</p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick='addToCart("1984", 10.50)'>Add to Cart</button>
                        <button class="btn btn-outline-danger" onclick='addToWishlist("1984")'>♡ Wishlist</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Book 6 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="~/lib/bootstrap/Bear_AU.jpg" class="card-img-top" alt="Bear">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">Julia Phillips</h5>
                    <p class="card-text text-muted">Harper Lee</p>
                    <div class="rating mb-2">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="fw-bold">$8.99</p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick='addToCart("To Kill a Mockingbird", 8.99)'>Add to Cart</button>
                        <button class="btn btn-outline-danger" onclick='addToWishlist("To Kill a Mockingbird")'>♡ Wishlist</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Book 1 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="~/lib/bootstrap/timemachine.jpg" class="card-img-top" alt="The Time Traveler">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">The Time Traveler</h5>
                    <p class="card-text text-muted">H.G. Wells</p>
                    <div class="rating mb-2">&#9733;&#9733;&#9733;&#9733;&#9734;</div>
                    <p class="fw-bold">$12.99</p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick='addToCart("The Time Traveler", 12.99)'>Add to Cart</button>
                        <button class="btn btn-outline-danger" onclick='addToWishlist("The Time Traveler")'>♡ Wishlist</button>
                    </div>
                </div>
            </div>
        </div>

        

        <!-- Book 3 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="~/lib/bootstrap/To Kill a Mockingbird.jpg" class="card-img-top" alt="To Kill a Mockingbird">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">To Kill a Mockingbird</h5>
                    <p class="card-text text-muted">Harper Lee</p>
                    <div class="rating mb-2">&#9733;&#9733;&#9733;&#9733;&#9733;</div>
                    <p class="fw-bold">$8.99</p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick='addToCart("To Kill a Mockingbird", 8.99)'>Add to Cart</button>
                        <button class="btn btn-outline-danger" onclick='addToWishlist("To Kill a Mockingbird")'>♡ Wishlist</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Book 4 -->
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <img src="~/lib/bootstrap/book 1.jpg" class="card-img-top" alt="It ends with us">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">It ends with us</h5>
                    <p class="card-text text-muted">Colleen Hover </p>
                    <div class="rating mb-2">&#9733;&#9733;&#9733;&#9733;&#9734;</div>
                    <p class="fw-bold">$12.99</p>
                    <div class="btn-group">
                        <button class="btn btn-primary" onclick='addToCart("The Time Traveler", 12.99)'>Add to Cart</button>
                        <button class="btn btn-outline-danger" onclick='addToWishlist("The Time Traveler")'>♡ Wishlist</button>
                    </div>
                </div>
            </div>
        </div>
      

        <!-- Add more books similarly -->
    </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast-notification"></div>

<!-- JavaScript -->
<script>
    function showToast(message) {
        const toast = document.getElementById("toast");
        toast.textContent = message;
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 2500);
    }

    function addToCart(title, price) {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.push({ title, price });
        localStorage.setItem("cart", JSON.stringify(cart));
        showToast(`"${title}" added to cart!`);
    }

    function addToWishlist(title) {
        const wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
        if (!wishlist.some(item => item.title === title)) {
            wishlist.push({ title });
            localStorage.setItem("wishlist", JSON.stringify(wishlist));
            showToast(`"${title}" added to wishlist!`);
        } else {
            showToast(`"${title}" is already in your wishlist.`);
        }
    }

    document.getElementById("searchBox").addEventListener("input", function () {
        const query = this.value.toLowerCase();
        const cards = document.querySelectorAll("#bookList .card");
        cards.forEach(card => {
            const title = card.querySelector(".card-title").innerText.toLowerCase();
            card.closest(".col-md-4").style.display = title.includes(query) ? "block" : "none";
        });
    });

    document.getElementById("sortSelect").addEventListener("change", function () {
        const cards = Array.from(document.querySelectorAll("#bookList .col-md-4"));
        const sortOrder = this.value;
        cards.sort((a, b) => {
            const priceA = parseFloat(a.querySelector(".fw-bold").innerText.replace("$", ""));
            const priceB = parseFloat(b.querySelector(".fw-bold").innerText.replace("$", ""));
            return sortOrder === "lowToHigh" ? priceA - priceB : priceB - priceA;
        });
        const bookList = document.getElementById("bookList");
        bookList.innerHTML = "";
        cards.forEach(card => bookList.appendChild(card));
    });
</script>
